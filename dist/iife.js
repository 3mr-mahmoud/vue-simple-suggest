var vueSimpleSuggest=function(){"use strict";var t={selectionUp:[38],selectionDown:[40],select:[13],hideList:[27],autocomplete:[32,13]},e={input:String,select:Object},n={type:String},s={type:n,accesskey:n,autocomplete:n,form:n,formaction:n,formenctype:n,formmethod:n,formtarget:n,height:n,width:n,inputmode:n,max:n,min:n,minlength:n,maxlength:n,name:n,pattern:n,placeholder:n,selectionDirection:n,selectionEnd:n,selectionStart:n,size:n,src:n,step:n,tabindex:n,title:n,spellcheck:{},readonly:{},required:{},multiple:{},formnovalidate:{},autofocus:{},checked:{},disabled:{}};function i(t,e){return e.split(".").reduce(function(t,e){return t===Object(t)?t[e]:t},t)}function r(t,e){if(t.length<=0)return!1;var n=function(t){return t.some(function(t){return t===e.keyCode})};return Array.isArray(t[0])?t.some(function(t){return n(t)}):n(t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function s(i,r){try{var o=e[i](r),u=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(u).then(function(t){s("next",t)},function(t){s("throw",t)});t(u)}("next")})}},l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},c="input";return{render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-simple-suggest"},[n("div",{ref:"inputSlot",staticClass:"input-wrapper",class:{designed:!t.destyled},on:{click:t.onInputClick,input:t.onInput,keydown:t.onArrowKeyDown,keyup:function(e){t.onListKeyUp(e),t.onAutocomplete(e)}}},[t._t("default",[n("input",t._b({staticClass:"default-input",domProps:{value:t.text||""}},"input",t.$props,!1))])],2),t._v(" "),!t.listShown||t.removeList||t.miscSlotsAreEmpty()?t._e():n("div",{staticClass:"suggestions",class:{designed:!t.destyled}},[t._t("misc-item-above",null,{suggestions:t.suggestions,query:t.text}),t._v(" "),t._l(t.suggestions,function(e,s){return n("div",{key:t.isPlainSuggestion?"suggestion-"+s:t.valueProperty(e),staticClass:"suggest-item",class:{selected:t.selected&&t.valueProperty(e)==t.valueProperty(t.selected),hover:t.hovered&&t.valueProperty(t.hovered)==t.valueProperty(e)},on:{mouseenter:function(n){t.hover(e,n.target)},mouseleave:function(e){t.hover(null,e.target)}}},[t._t("suggestion-item",[n("span",[t._v(t._s(t.displayProperty(e)))])],{suggestion:e,query:t.text})],2)}),t._v(" "),t._t("misc-item-below",null,{suggestions:t.suggestions,query:t.text})],2)])},staticRenderFns:[],name:"vue-simple-suggest",model:{prop:"value",get event(){return c}},props:l({},s,{controls:{type:Object,default:function(){return t}},minLength:{type:Number,default:1},maxSuggestions:{type:Number,default:10},displayAttribute:{type:String,default:"title"},valueAttribute:{type:String,default:"id"},list:{type:[Function,Array],default:function(){return[]}},removeList:{type:Boolean,default:!1},destyled:{type:Boolean,default:!1},filterByQuery:{type:Boolean,default:!1},filter:{type:Function,default:function(t){return!value||~this.displayProperty(t).toLowerCase().indexOf(value.toLowerCase())}},debounce:{type:Number,default:0},value:{},mode:{type:String,default:c,validator:function(t){return!!~Object.keys(e).indexOf(t.toLowerCase())}}}),watch:{mode:function(t){return c=t}},data:function(){return{selected:null,hovered:null,suggestions:[],listShown:!1,inputElement:null,canSend:!0,timeoutInstance:null,text:this.value,isPlainSuggestion:!1,controlScheme:{}}},computed:{slotIsComponent:function(){return this.$slots.default&&this.$slots.default.length>0&&!!this.$slots.default[0].componentInstance},listIsRequest:function(){return"function"==typeof this.list},input:function(){return this.slotIsComponent?this.$slots.default[0].componentInstance:this.inputElement},on:function(){return this.slotIsComponent?"$on":"addEventListener"},off:function(){return this.slotIsComponent?"$off":"removeEventListener"},hoveredIndex:function(){var t=this;return this.suggestions.findIndex(function(e){return t.hovered&&t.valueProperty(t.hovered)==t.valueProperty(e)})}},created:function(){this.controlScheme=l({},t,this.controls),c=this.mode},mounted:function(){this.inputElement=this.$refs.inputSlot.querySelector("input"),this.input[this.on]("blur",this.onBlur),this.input[this.on]("focus",this.onFocus),console.log(this)},beforeDestroy:function(){this.input[this.off]("blur",this.onBlur),this.input[this.off]("focus",this.onFocus)},methods:{miscSlotsAreEmpty:function(){var t=this,e=function(e){return t.$scopedSlots["misc-item-"+e]};return["above","below"].some(function(n){return function(t){return e(t)&&"function"==typeof e(t)}(n)?!e(n)(t):!e(n)})},displayProperty:function(t){return(this.isPlainSuggestion?t:i(t,this.displayAttribute))+""},valueProperty:function(t){return this.isPlainSuggestion?t:i(t,this.valueAttribute)},select:function(t){this.hovered=null,this.selected=t,this.$emit("select",t),this.$emit("input",this.displayProperty(t)),this.inputElement.value=this.displayProperty(t),this.text=this.displayProperty(t),this.inputElement.focus()},hover:function(t,e){this.hovered=t,null!=this.hovered&&this.$emit("hover",t,e)},hideList:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.listShown&&(this.hovered&&!t&&this.select(this.hovered),this.listShown=!1,this.$emit("hide-list"))},showList:function(){!this.listShown&&this.text&&this.text.length>=this.minLength&&this.suggestions.length>0&&(this.listShown=!0,this.$emit("show-list"))},onInputClick:function(t){var e=this;return u(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.minLength||e.text){t.next=3;break}return t.next=3,e.research();case 3:e.showList();case 4:case"end":return t.stop()}},t,e)}))()},onArrowKeyDown:function(t){if(r([this.controlScheme.selectionUp,this.controlScheme.selectionDown],t)){t.preventDefault(),this.showList();var e=r(this.controlScheme.selectionDown,t),n=2*e-1,s=e?0:this.suggestions.length-1,i=e?this.hoveredIndex<this.suggestions.length-1:this.hoveredIndex>0,o=null;o=this.hovered?i?this.suggestions[this.hoveredIndex+n]:this.suggestions[s]:this.selected||this.suggestions[s],this.hover(o)}},onListKeyUp:function(t){var e=this.controlScheme.select,n=this.controlScheme.hideList;r([e,n],t)&&(t.preventDefault(),this.listShown?this.hideList(r(n,t)):r(e,t)&&this.research())},onAutocomplete:function(t){r(this.controlScheme.autocomplete,t)&&(t.ctrlKey||t.shiftKey)&&(t.preventDefault(),this.select(this.suggestions[0]),this.hover(this.suggestions[0]))},onBlur:function(t){this.hideList(),this.$emit("blur",t)},onFocus:function(t){this.$emit("focus",t),this.showList()},onInput:function(t){this.text=t.target.value,this.$emit("input",this.text),this.selected&&(this.selected=null,this.$emit("select",null)),this.debounce?(clearTimeout(this.timeoutInstance),this.timeoutInstance=setTimeout(this.research,this.debounce)):this.research()},research:function(){var t=this;return u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.canSend){e.next=10;break}return t.canSend=!1,e.t0=t,e.t1=t,e.next=7,t.getSuggestions(t.text);case 7:e.t2=e.sent,e.t0.$set.call(e.t0,e.t1,"suggestions",e.t2),t.canSend=!0;case 10:e.next=16;break;case 12:throw e.prev=12,e.t3=e.catch(0),t.clearSuggestions(),e.t3;case 16:return e.prev=16,t.$nextTick(function(){0===t.suggestions.length&&t.miscSlotsAreEmpty()?t.hideList(!0):t.showList()}),e.abrupt("return",t.suggestions);case 20:case"end":return e.stop()}},e,t,[[0,12,16,20]])}))()},getSuggestions:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return u(regeneratorRuntime.mark(function n(){var s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.listShown||e){n.next=4;break}return t.hideList(),t.clearSuggestions(),n.abrupt("return",t.suggestions);case 4:if(!(t.minLength>0&&e.length<t.minLength)){n.next=6;break}return n.abrupt("return",t.suggestions);case 6:if(t.selected=null,t.listIsRequest&&t.$emit("request-start",e),s=[],n.prev=9,!t.listIsRequest){n.next=19;break}return n.next=13,t.list(e);case 13:if(n.t1=n.sent,n.t1){n.next=16;break}n.t1=[];case 16:n.t0=n.t1,n.next=20;break;case 19:n.t0=t.list;case 20:s=n.t0,Array.isArray(s)||(s=[s]),"object"!==o(s[0])||Array.isArray(s[0])?t.isPlainSuggestion=!0:t.isPlainSuggestion=!1,t.filterByQuery&&(s=s.filter(t.filter)),t.listIsRequest&&t.$emit("request-done",s),n.next=34;break;case 27:if(n.prev=27,n.t2=n.catch(9),!t.listIsRequest){n.next=33;break}t.$emit("request-failed",n.t2),n.next=34;break;case 33:throw n.t2;case 34:return n.prev=34,t.maxSuggestions&&s.splice(t.maxSuggestions),n.abrupt("return",s);case 38:case"end":return n.stop()}},n,t,[[9,27,34,38]])}))()},clearSuggestions:function(){this.suggestions.splice(0)}}}}();
